<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Agaonline ğŸ‡¹ğŸ‡· - ArkadaÅŸlarÄ±nla Oyna</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="darkmode.css">
    <style>
        /* Hardware Acceleration & Performance */
        * {
            -webkit-transform: translateZ(0);
            -moz-transform: translateZ(0);
            -ms-transform: translateZ(0);
            -o-transform: translateZ(0);
            transform: translateZ(0);
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
            -webkit-perspective: 1000;
            perspective: 1000;
        }
        
        html, body {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            text-rendering: optimizeLegibility;
            will-change: transform;
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Main Menu Screen -->
        <div id="mainMenu" class="screen active">
            <div class="menu-wrapper">
                <div class="menu-container">
                    <div class="menu-header">
                        <div style="display: flex; align-items: center; justify-content: space-between; gap: 10px;">
                            <div>
                                <h1 class="game-title">ğŸ’° AGAONLINE ğŸ‡¹ğŸ‡·</h1>
                                <p class="game-subtitle">ArkadaÅŸlarÄ±nla Ã§evrim iÃ§i oyna</p>
                            </div>
                            <button id="darkModeToggle" class="btn-dark-mode" onclick="toggleDarkMode()" title="Tema deÄŸiÅŸtir">ğŸŒ™</button>
                        </div>
                    </div>
                    
                    <div class="menu-form">
                        <input type="text" id="playerNameInput" placeholder="Ä°smini yaz" maxlength="20" class="input-field">

                        <div class="appearance-selector">
                            <label>Tahta seÃ§</label>
                            <select id="boardSelect" class="input-field">
                                <option value="dunya" selected>DÃ¼nya (VarsayÄ±lan)</option>
                                <option value="turkiye">TÃ¼rkiye</option>
                                <option value="amerika">Amerika</option>
                                <option value="avrupa">Avrupa</option>
                                <option value="japonya">Japonya</option>
                                <option value="cin">Ã‡in</option>
                                <option value="kore">Kore</option>
                                <option value="rusya">Rusya</option>
                            </select>
                        </div>
                        
                        <div class="appearance-selector">
                            <label>Avatar seÃ§</label>
                            <div class="avatar-grid">
                                <button class="avatar-btn selected" data-appearance="ğŸ‘¤" onclick="selectAppearance('ğŸ‘¤')">ğŸ‘¤</button>
                                <button class="avatar-btn" data-appearance="ğŸ©" onclick="selectAppearance('ğŸ©')">ğŸ©</button>
                                <button class="avatar-btn" data-appearance="ğŸš—" onclick="selectAppearance('ğŸš—')">ğŸš—</button>
                                <button class="avatar-btn" data-appearance="ğŸ•" onclick="selectAppearance('ğŸ•')">ğŸ•</button>
                                <button class="avatar-btn" data-appearance="ğŸ¸" onclick="selectAppearance('ğŸ¸')">ğŸ¸</button>
                                <button class="avatar-btn" data-appearance="ğŸ‘‘" onclick="selectAppearance('ğŸ‘‘')">ğŸ‘‘</button>
                                <button class="avatar-btn" data-appearance="ğŸ¤“" onclick="selectAppearance('ğŸ¤“')">ğŸ¤“</button>
                                <button class="avatar-btn" data-appearance="ğŸ§™" onclick="selectAppearance('ğŸ§™')">ğŸ§™</button>
                                <button class="avatar-btn" data-appearance="ğŸ‡" onclick="selectAppearance('ğŸ‡')">ğŸ‡</button>
                                <button class="avatar-btn" data-appearance="ğŸ§›" onclick="selectAppearance('ğŸ§›')">ğŸ§›</button>
                                <button class="avatar-btn" data-appearance="ğŸ‘»" onclick="selectAppearance('ğŸ‘»')">ğŸ‘»</button>
                                <button class="avatar-btn" data-appearance="ğŸ¤–" onclick="selectAppearance('ğŸ¤–')">ğŸ¤–</button>
                            </div>
                        </div>



                        <div class="menu-buttons">
                            <button onclick="createLobby()" class="btn-primary">Oyun OluÅŸtur</button>
                            <button onclick="joinRandomLobby()" class="btn-secondary">Oyuna KatÄ±l</button>
                        </div>
                    </div>
                </div>

                <div class="lobbies-panel">
                    <div style="display:flex; align-items:center; justify-content:space-between; gap:8px;">
                        <h3 style="margin:0;">ğŸ® Aktif Oyunlar</h3>
                        <button class="btn-ghost" onclick="refreshLobbies()" style="padding:6px 10px;">Yenile</button>
                    </div>
                    <div id="lobbiesList" class="lobbies-list-large"></div>
                </div>
            </div>
        </div>

        <!-- Join Screen -->
        <div id="joinScreen" class="screen">
            <div class="join-container">
                <h2>Lobiye KatÄ±l</h2>
                <input type="text" id="lobbyIdInput" placeholder="Lobi ID yaz" class="input-field">
                <div class="menu-buttons">
                    <button onclick="joinLobby()" class="btn-primary">KatÄ±l</button>
                    <button onclick="showMenu()" class="btn-secondary">Geri</button>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="screen">
            <div class="game-container">
                <!-- Main Content -->
                <div class="game-content">
                    <!-- Left Panel - Players & Setup -->
                    <div class="left-panel">
                        <div class="panel-section" style="gap: 6px; padding-bottom: 6px;">
                            <h2 id="lobbyStatus" style="margin-bottom: 4px; font-size: 1.2em;">Oyun Lobisi</h2>
                            <div id="playerCount" class="player-count">Oyuncu: 1/12</div>
                            <div id="boardName" class="player-count" style="font-size: 0.9em; opacity: 0.8;"></div>
                            <div id="lobbyIdDisplay" class="player-count" style="font-size: 0.85em; opacity: 0.8;"></div>
                            <button id="copyLobbyIdBtn" onclick="copyCurrentLobbyId()" class="btn-ghost" style="width:100%; display:none;">ID Kopyala</button>
                            <button id="bankruptBtn" onclick="declareBankruptcy()" class="btn-leave" style="width: 100%; margin-top: 6px; display: none; background: linear-gradient(135deg, #ef4444, #dc2626);">ğŸ’¸ Ä°flas Et</button>
                            <button onclick="leaveGame()" class="btn-leave" style="width: 100%; margin-top: 6px;">Ã‡Ä±kÄ±ÅŸ</button>
                        </div>

                        <div class="panel-section players-section">
                            <h3>ğŸ‘¥ Oyuncular</h3>
                            <div id="playersList" class="players-list"></div>
                        </div>

                        <div class="panel-section events-section" style="display: none;">
                            <h3>ğŸ“œ Olaylar</h3>
                            <div id="eventLog" class="event-log"></div>
                        </div>


                        <div class="panel-section setup-section" id="setupPanel">
                            <h3>âš™ï¸ Host AyarlarÄ±</h3>
                            <div class="game-rules">
                                <label>
                                    <input type="checkbox" id="ruleTaxFree" onchange="updateRules()"> Vergi Muafiyeti
                                </label>
                                <label>
                                    <input type="checkbox" id="ruleFastMode" onchange="updateRules()"> HÄ±zlÄ± Mod (2x Para)
                                </label>
                                <label>
                                    <input type="checkbox" id="ruleFreeParkingBonus" onchange="updateRules()"> Ãœcretsiz Park Bonusu
                                </label>
                                <label>
                                    <input type="checkbox" id="ruleNoAuctions" onchange="updateRules()"> MÃ¼zayede Yok
                                </label>
                                <label style="margin-top: 10px;">
                                    BaÅŸlangÄ±Ã§ ParasÄ±: â‚º<span id="initialMoney">2000</span>
                                    <input type="range" id="initialMoneySlider" min="500" max="10000" step="100" value="2000" onchange="updateInitialMoney()" class="money-slider" style="margin-top: 8px; width: 100%;">
                                </label>
                                <label>
                                    BAÅLA ParasÄ±: â‚º<span id="goMoney">200</span>
                                    <input type="range" id="goMoneySlider" min="100" max="1000" step="50" value="200" onchange="updateGoMoney()" class="money-slider" style="margin-top: 8px; width: 100%;">
                                </label>
                                <label>
                                    Ev Fiyat Ã‡arpanÄ±: x<span id="houseMultiplier">0.5</span>
                                    <input type="range" id="houseMultiplierSlider" min="0.25" max="1" step="0.25" value="0.5" onchange="updateHouseMultiplier()" class="money-slider" style="margin-top: 8px; width: 100%;">
                                </label>
                                <label>
                                    Tur SÃ¼re Limiti: <span id="turnTimeLimit">60</span> saniye
                                    <input type="range" id="turnTimeLimitSlider" min="30" max="180" step="10" value="60" onchange="updateTurnTimeLimit()" class="money-slider" style="margin-top: 8px; width: 100%;">
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Center - Board -->
                    <div class="center-panel">
                        <div class="board-wrapper">
                            <div id="monopolyBoard" class="monopoly-board">
                                <!-- Board generated by JS -->
                            </div>
                            
                            <!-- Board Center (Dice & Controls) -->
                            <div class="board-center">
                                    <!-- Color Picker (Before Game Starts) -->
                                    <div id="colorPickerPanel" style="display: none; text-align: center; padding: 20px; background: rgba(15, 23, 42, 0.95); border-radius: 16px; backdrop-filter: blur(10px); box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);">
                                        <h3 style="margin: 0 0 15px 0; color: #60a5fa; font-size: 1.3em; text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);">ğŸ¨ Rengini SeÃ§</h3>
                                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin-bottom: 15px;">
                                            <button onclick="selectPlayerColor('#ef4444')" style="width: 50px; height: 50px; border-radius: 12px; border: 3px solid rgba(255,255,255,0.3); background: linear-gradient(135deg, #ef4444, #dc2626); cursor: pointer; box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4); transition: all 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'"></button>
                                            <button onclick="selectPlayerColor('#f97316')" style="width: 50px; height: 50px; border-radius: 12px; border: 3px solid rgba(255,255,255,0.3); background: linear-gradient(135deg, #f97316, #ea580c); cursor: pointer; box-shadow: 0 4px 12px rgba(249, 115, 22, 0.4); transition: all 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'"></button>
                                            <button onclick="selectPlayerColor('#eab308')" style="width: 50px; height: 50px; border-radius: 12px; border: 3px solid rgba(255,255,255,0.3); background: linear-gradient(135deg, #eab308, #ca8a04); cursor: pointer; box-shadow: 0 4px 12px rgba(234, 179, 8, 0.4); transition: all 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'"></button>
                                            <button onclick="selectPlayerColor('#22c55e')" style="width: 50px; height: 50px; border-radius: 12px; border: 3px solid rgba(255,255,255,0.3); background: linear-gradient(135deg, #22c55e, #16a34a); cursor: pointer; box-shadow: 0 4px 12px rgba(34, 197, 94, 0.4); transition: all 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'"></button>
                                            <button onclick="selectPlayerColor('#3b82f6')" style="width: 50px; height: 50px; border-radius: 12px; border: 3px solid rgba(255,255,255,0.3); background: linear-gradient(135deg, #3b82f6, #2563eb); cursor: pointer; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4); transition: all 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'"></button>
                                            <button onclick="selectPlayerColor('#8b5cf6')" style="width: 50px; height: 50px; border-radius: 12px; border: 3px solid rgba(255,255,255,0.3); background: linear-gradient(135deg, #8b5cf6, #7c3aed); cursor: pointer; box-shadow: 0 4px 12px rgba(139, 92, 246, 0.4); transition: all 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'"></button>
                                            <button onclick="selectPlayerColor('#ec4899')" style="width: 50px; height: 50px; border-radius: 12px; border: 3px solid rgba(255,255,255,0.3); background: linear-gradient(135deg, #ec4899, #db2777); cursor: pointer; box-shadow: 0 4px 12px rgba(236, 72, 153, 0.4); transition: all 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'"></button>
                                            <button onclick="selectPlayerColor('#06b6d4')" style="width: 50px; height: 50px; border-radius: 12px; border: 3px solid rgba(255,255,255,0.3); background: linear-gradient(135deg, #06b6d4, #0891b2); cursor: pointer; box-shadow: 0 4px 12px rgba(6, 182, 212, 0.4); transition: all 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'"></button>
                                            <button onclick="selectPlayerColor('#10b981')" style="width: 50px; height: 50px; border-radius: 12px; border: 3px solid rgba(255,255,255,0.3); background: linear-gradient(135deg, #10b981, #059669); cursor: pointer; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4); transition: all 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'"></button>
                                            <button onclick="selectPlayerColor('#f59e0b')" style="width: 50px; height: 50px; border-radius: 12px; border: 3px solid rgba(255,255,255,0.3); background: linear-gradient(135deg, #f59e0b, #d97706); cursor: pointer; box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4); transition: all 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'"></button>
                                            <button onclick="selectPlayerColor('#6366f1')" style="width: 50px; height: 50px; border-radius: 12px; border: 3px solid rgba(255,255,255,0.3); background: linear-gradient(135deg, #6366f1, #4f46e5); cursor: pointer; box-shadow: 0 4px 12px rgba(99, 102, 241, 0.4); transition: all 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'"></button>
                                            <button onclick="selectPlayerColor('#14b8a6')" style="width: 50px; height: 50px; border-radius: 12px; border: 3px solid rgba(255,255,255,0.3); background: linear-gradient(135deg, #14b8a6, #0d9488); cursor: pointer; box-shadow: 0 4px 12px rgba(20, 184, 166, 0.4); transition: all 0.3s ease;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'"></button>
                                        </div>
                                        <div id="selectedColorPreview" style="margin-top: 10px; padding: 10px; border-radius: 8px; background: rgba(96, 165, 250, 0.2); font-size: 0.9em; color: #60a5fa;">Bir renk seÃ§</div>
                                    </div>

                                    <button id="startBtn" class="btn-start" onclick="startGame()" style="display: none;">Oyunu BaÅŸlat</button>
                                <div id="currentTurnDisplay" class="current-turn-info" style="display: none;"></div>
                                <div class="dice-display">
                                    <div class="dice-box">
                                        <div id="dice1" class="dice">?</div>
                                        <div id="dice2" class="dice">?</div>
                                    </div>
                                        <div id="diceResult" class="dice-result"></div>
                                </div>
                                    <button id="rollBtn" class="btn-roll" onclick="rollDice()" aria-label="Zar at" style="display: none;">ğŸ²</button>
                                <div id="boardEventDisplay" class="board-event-display" style="margin-top: 15px; max-height: 80px; overflow: hidden; font-size: 0.85em; color: rgba(255,255,255,0.9); text-align: center; line-height: 1.3;"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Right Panel - Chat & Events -->
                    <div class="right-panel">
                        <div class="panel-section owned-section">
                            <h3>ğŸ  MÃ¼lklerim</h3>
                            <div id="ownedPropertiesList" class="owned-list"></div>
                        </div>

                        <div class="panel-section trade-section">
                            <h3>ğŸ’° Takas Merkezi</h3>
                            <div id="tradeHistoryList" class="trade-history" style="margin-bottom: 10px; max-height: 120px; overflow: auto;"></div>
                            <button onclick="openTradeModal()" class="btn-primary" style="width: 100%;">
                                <span style="font-size: 1.2em;">ğŸ’±</span> Takas Yap
                            </button>
                        </div>

                        <div class="panel-section chat-section">
                            <h3>ğŸ’¬ Sohbet</h3>
                            <div id="chatMessages" class="chat-messages"></div>
                            <div class="chat-input">
                                <input type="text" id="chatInput" placeholder="Mesaj yaz..." onkeypress="handleChatKeypress(event)">
                                <button onclick="sendMessage()" class="btn-send">GÃ¶nder</button>
                        </div>
                    </div>
                </div>

                <!-- Music Control in Game -->
                <div class="game-music-control" style="position: fixed; bottom: 20px; right: 20px; background: rgba(0,0,0,0.8); padding: 8px; border-radius: 8px; display: none;">
                    <div style="display: flex; align-items: center; gap: 6px;">
                        <span style="color: white; font-size: 0.9em;">ğŸµ</span>
                        <input type="range" id="gameMusicVolume" class="music-slider" min="0" max="100" value="50" onchange="setMusicVolume(this.value)" style="width: 60px;">
                    </div>
                </div>
            </div>
        </div>
        </div>
    </div>

    <!-- Property Popup -->
    <div id="propertyPopup" class="property-popup" style="display: none;">
        <div class="popup-content">
            <h2 id="propName"></h2>
            <div id="propDetails" class="property-details"></div>
            <div id="buildSection" class="build-section" style="display: none;">
                <button id="buildHouseBtn" class="btn-build" onclick="buildHouse()">ğŸ  Ev Dik</button>
                <button id="sellHouseBtn" class="btn-sell" onclick="sellHouse()" style="display: none;">ğŸ’¸ Ev Sat</button>
            </div>
            <div class="popup-actions">
                <button id="buyBtn" class="btn-buy" onclick="buyProperty()" style="display: none;">SatÄ±n Al</button>
                <button onclick="closePopup()" class="btn-close">Kapat</button>
            </div>
        </div>
    </div>

    <!-- Readonly Property Popup -->
    <div id="roPropertyPopup" class="property-popup" style="display: none;">
        <div class="popup-content">
            <h2 id="roPropName"></h2>
            <div id="roPropDetails" class="property-details"></div>
            <div class="popup-actions">
                <button onclick="closeRoPopup()" class="btn-close">Kapat</button>
            </div>
        </div>
    </div>

    <!-- Trade Offer Modal -->
    <div id="tradeOfferModal" class="trade-offer-modal" style="display: none;">
        <div class="trade-offer-overlay"></div>
        <div class="trade-offer-content">
            <h2 style="margin-top: 0; text-align: center;">ğŸ’± Takas Teklifi</h2>
            <div class="trade-offer-sender" id="tradeOfferSender"></div>
            
            <div style="display: flex; gap: 15px; margin: 15px 0; font-size: 0.9em;">
                <div style="flex: 1;">
                    <div style="font-weight: 700; margin-bottom: 8px; color: #FFD700;">Onlar Talep Ediyor</div>
                    <div id="tradeOfferTheirWant" style="background: rgba(255,255,255,0.05); padding: 8px; border-radius: 4px; min-height: 40px;"></div>
                </div>
                <div style="flex: 1;">
                    <div style="font-weight: 700; margin-bottom: 8px; color: #FFD700;">Bana Verecek</div>
                    <div id="tradeOfferTheirGive" style="background: rgba(255,255,255,0.05); padding: 8px; border-radius: 4px; min-height: 40px;"></div>
                </div>
            </div>

            <div style="display: flex; gap: 10px; justify-content: center; margin-top: 20px; flex-wrap: wrap;">
                <button id="btnAcceptTrade" class="btn-accept-trade" onclick="acceptTradeOffer()">âœ“ Kabul Et</button>
                <button id="btnRejectTrade" class="btn-reject-trade" onclick="rejectTradeOffer()">âœ• Reddet</button>
                <button id="btnCounterOffer" class="btn-counter-trade" onclick="showCounterOfferPanel()">ğŸ”„ KarÅŸÄ± Teklif</button>
            </div>
        </div>
    </div>

    <!-- Counter Offer Panel -->
    <div id="counterOfferPanel" class="counter-offer-panel" style="display: none;">
        <div class="trade-offer-overlay" onclick="closeCounterOfferPanel()" style="cursor: pointer;"></div>
        <div class="trade-offer-content">
            <h2 style="margin-top: 0; text-align: center;">ğŸ”„ KarÅŸÄ± Teklif GÃ¶nder</h2>
            <div class="trade-offer-sender" id="counterOfferTarget"></div>

            <div style="display: flex; gap: 15px; margin: 15px 0; font-size: 0.9em;">
                <div style="flex: 1;">
                    <div style="font-weight: 700; margin-bottom: 8px; color: #FFD700;">Biz Talep Ediyoruz</div>
                    <div id="counterMyWant" class="owned-list" style="max-height: 100px; overflow: auto; background: rgba(255,255,255,0.05); padding: 8px; border-radius: 4px;"></div>
                    <label style="display: block; margin-top: 6px; font-size: 0.85em;">Para Talep: <input type="number" id="counterMyMoneyWant" class="input-field" style="margin-top: 3px; width: 60px;" min="0" value="0"></label>
                </div>
                <div style="flex: 1;">
                    <div style="font-weight: 700; margin-bottom: 8px; color: #FFD700;">Onlara VereceÄŸiz</div>
                    <div id="counterMyGive" class="owned-list" style="max-height: 100px; overflow: auto; background: rgba(255,255,255,0.05); padding: 8px; border-radius: 4px;"></div>
                    <label style="display: block; margin-top: 6px; font-size: 0.85em;">Para Verilecek: <input type="number" id="counterMyMoneyGive" class="input-field" style="margin-top: 3px; width: 60px;" min="0" value="0"></label>
                </div>
            </div>

            <div id="counterPropsFromPlayer" style="background: rgba(255,255,255,0.05); padding: 10px; border-radius: 4px; margin: 10px 0; border-left: 5px solid rgba(96, 165, 250, 0.6);">
                <div style="font-weight: 700; margin-bottom: 8px; color: #FFD700;">Onun MÃ¼lkleri (SeÃ§)</div>
                <div id="counterAvailableProps" style="display: flex; flex-wrap: wrap; gap: 6px;"></div>
            </div>

            <div style="display: flex; gap: 10px; justify-content: center; margin-top: 15px;">
                <button class="btn-accept-trade" onclick="sendCounterOffer()">âœ“ KarÅŸÄ± Teklif GÃ¶nder</button>
                <button class="btn-reject-trade" onclick="closeCounterOfferPanel()">âœ• Ä°ptal</button>
            </div>
        </div>
    </div>

    <!-- Trade Modal -->
    <div id="tradeModal" class="trade-offer-modal" style="display: none;">
        <div class="trade-offer-overlay" onclick="closeTradeModal()" style="cursor: pointer;"></div>
        <div class="trade-offer-content" style="max-width: 650px; max-height: 90vh; overflow-y: auto;">
            <h2 style="margin-top: 0; text-align: center;">ğŸ’± Takas Merkezi</h2>

            <!-- Pending Trades Section -->
            <div id="pendingTradesSection" style="margin-bottom: 20px; padding: 12px; background: rgba(96, 165, 250, 0.1); border-radius: 8px; border: 1px solid rgba(96, 165, 250, 0.3);">
                <div style="font-weight: 700; margin-bottom: 10px; color: #60a5fa; display: flex; align-items: center; gap: 8px;">
                    <span>ğŸ“¬</span>
                    <span>Bekleyen Teklifler</span>
                    <span id="pendingTradeCount" style="background: #60a5fa; color: #000; padding: 2px 8px; border-radius: 12px; font-size: 0.8em; font-weight: 800;">0</span>
                </div>
                <div id="pendingTradesList" style="display: flex; flex-direction: column; gap: 8px;">
                    <div style="text-align: center; color: rgba(255,255,255,0.5); padding: 10px; font-size: 0.9em;">
                        Bekleyen teklif yok
                    </div>
                </div>
            </div>

            <div style="margin-bottom: 20px;">
                <label style="color: rgba(255,255,255,0.8); font-size: 0.9em; margin-bottom: 5px; display: block;">Oyuncu SeÃ§</label>
                <select id="tradeWithPlayer" class="input-field" style="margin-bottom: 10px; width: 100%;" onchange="refreshTradeLists()">
                    <option>Oyuncu seÃ§...</option>
                </select>
            </div>

            <div style="display:flex; gap:15px; margin:15px 0;">
                <div style="flex:1;">
                    <div style="font-weight:700; margin-bottom:8px; color: #FFD700;">Benim MÃ¼lklerim</div>
                    <div id="myPropsForTrade" class="owned-list" style="max-height:120px; overflow:auto; background: rgba(255,255,255,0.05); padding: 8px; border-radius: 4px;"></div>
                    <label style="display:block; margin-top:8px; font-size:0.9em;">Benim Para: â‚º<span id="tradeMoneyOfferValue">0</span><br><input type="range" id="tradeMoneyOffer" class="money-slider" min="0" max="2000" value="0" onchange="updateTradeMoneyOffer()" style="margin-top:4px; width: 100%;"></label>
                </div>
                <div style="flex:1;">
                    <div style="font-weight:700; margin-bottom:8px; color: #FFD700;">KarÅŸÄ± Taraf</div>
                    <div id="theirPropsForTrade" class="owned-list" style="max-height:120px; overflow:auto; background: rgba(255,255,255,0.05); padding: 8px; border-radius: 4px;"></div>
                    <label style="display:block; margin-top:8px; font-size:0.9em;">OnlarÄ±n Para: â‚º<span id="tradeMoneyRequestValue">0</span><br><input type="range" id="tradeMoneyRequest" class="money-slider" min="0" max="2000" value="0" onchange="updateTradeMoneyRequest()" style="margin-top:4px; width: 100%;"></label>
                </div>
            </div>

            <div style="display: flex; gap: 10px; justify-content: center; margin-top: 20px;">
                <button id="btnProposeTrade" class="btn-accept-trade" onclick="proposeTrade()" disabled>
                    <span style="font-size: 1.2em;">ğŸ’±</span> Teklif GÃ¶nder
                </button>
                <button class="btn-reject-trade" onclick="closeTradeModal()">âœ• Ä°ptal</button>
            </div>
        </div>
    </div>

    <!-- Jail Modal -->
    <div id="jailModal" class="trade-offer-modal" style="display: none;">
        <div class="trade-offer-overlay" onclick="closeJailModal()" style="cursor: pointer;"></div>
        <div class="trade-offer-content" style="max-width: 400px;">
            <h2 style="margin-top: 0; text-align: center;">ğŸ‘® Hapishane</h2>

            <div style="text-align: center; margin: 20px 0;">
                <p>Hapishanedesin! Ã‡Ä±kmak iÃ§in aÅŸaÄŸÄ±daki seÃ§eneklerden birini kullanabilirsin:</p>
                <div id="jailTurnsLeft" style="margin: 10px 0; font-weight: bold;"></div>
            </div>

            <div style="display: flex; flex-direction: column; gap: 10px;">
                <button class="btn-primary" onclick="payJailFine()" style="width: 100%;">ğŸ’° 100 TL Ã–de</button>
                <button class="btn-secondary" onclick="rollForJail()" style="width: 100%;">ğŸ² Ã‡ift Zar At</button>
                <button class="btn-ghost" onclick="closeJailModal()" style="width: 100%;">â³ Bekle (Otomatik Ã§Ä±kÄ±ÅŸ)</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="game.js"></script>
</body>
</html>
