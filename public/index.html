<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monopoly Online - Play with Friends</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <!-- Main Menu Screen -->
        <div id="mainMenu" class="screen active">
            <div class="menu-container">
                <div class="menu-header">
                    <h1 class="game-title">üè† MONOPOLY</h1>
                    <p class="game-subtitle">Play Online with Friends</p>
                </div>
                
                <div class="menu-form">
                    <input type="text" id="playerNameInput" placeholder="Enter Your Name" maxlength="20" class="input-field">
                    
                    <div class="appearance-selector">
                        <label>Choose Avatar</label>
                        <div class="avatar-grid">
                            <button class="avatar-btn selected" data-appearance="üë§" onclick="selectAppearance('üë§')">üë§</button>
                            <button class="avatar-btn" data-appearance="üé©" onclick="selectAppearance('üé©')">üé©</button>
                            <button class="avatar-btn" data-appearance="üöó" onclick="selectAppearance('üöó')">üöó</button>
                            <button class="avatar-btn" data-appearance="üêï" onclick="selectAppearance('üêï')">üêï</button>
                            <button class="avatar-btn" data-appearance="üé∏" onclick="selectAppearance('üé∏')">üé∏</button>
                            <button class="avatar-btn" data-appearance="üëë" onclick="selectAppearance('üëë')">üëë</button>
                        </div>
                    </div>

                    <div class="color-selector">
                        <label>Choose Color</label>
                        <div class="color-grid">
                            <button class="color-btn selected" data-color="#ef4444" style="background: #ef4444;" onclick="selectColor('#ef4444')"></button>
                            <button class="color-btn" data-color="#f97316" style="background: #f97316;" onclick="selectColor('#f97316')"></button>
                            <button class="color-btn" data-color="#eab308" style="background: #eab308;" onclick="selectColor('#eab308')"></button>
                            <button class="color-btn" data-color="#22c55e" style="background: #22c55e;" onclick="selectColor('#22c55e')"></button>
                            <button class="color-btn" data-color="#3b82f6" style="background: #3b82f6;" onclick="selectColor('#3b82f6')"></button>
                            <button class="color-btn" data-color="#8b5cf6" style="background: #8b5cf6;" onclick="selectColor('#8b5cf6')"></button>
                        </div>
                    </div>

                    <div class="menu-buttons">
                        <button onclick="createLobby()" class="btn-primary">Create Game</button>
                        <button onclick="showJoinScreen()" class="btn-secondary">Join Game</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Join Screen -->
        <div id="joinScreen" class="screen">
            <div class="join-container">
                <h2>Join Lobby</h2>
                <input type="text" id="lobbyIdInput" placeholder="Enter Lobby ID" class="input-field">
                <div class="menu-buttons">
                    <button onclick="joinLobby()" class="btn-primary">Join</button>
                    <button onclick="showMenu()" class="btn-secondary">Back</button>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="gameScreen" class="screen">
            <div class="game-container">
                <!-- Top Header -->
                <div class="game-header">
                    <div class="header-left">
                        <h2 id="lobbyStatus">Game Lobby</h2>
                        <div id="playerCount" class="player-count">Players: 1/6</div>
                    </div>
                    <div class="header-center">
                        <button id="startBtn" class="btn-start" onclick="startGame()" style="display: none;">Start Game</button>
                        <div id="gameStatus" class="game-status">Waiting to start...</div>
                    </div>
                    <div class="header-right">
                        <button onclick="leaveGame()" class="btn-leave">Leave</button>
                    </div>
                </div>

                <!-- Main Content -->
                <div class="game-content">
                    <!-- Left Panel - Players & Setup -->
                    <div class="left-panel">
                        <div class="panel-section players-section">
                            <h3>üë• Players</h3>
                            <div id="playersList" class="players-list"></div>
                        </div>

                        <div class="panel-section setup-section" id="setupPanel">
                            <h3>‚öôÔ∏è Game Setup</h3>
                            <div class="game-rules">
                                <label>
                                    <input type="checkbox" id="ruleTaxFree" onchange="updateRules()"> Tax Free Mode
                                </label>
                                <label>
                                    Initial Money: $<span id="initialMoney">1500</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Center - Board -->
                    <div class="center-panel">
                        <div class="board-wrapper">
                            <div id="monopolyBoard" class="monopoly-board">
                                <!-- Board generated by JS -->
                            </div>
                            
                            <!-- Board Center (Dice & Controls) -->
                            <div class="board-center">
                                <div class="dice-display">
                                    <div class="dice-box">
                                        <div id="dice1" class="dice">?</div>
                                        <div id="dice2" class="dice">?</div>
                                    </div>
                                    <div id="diceResult" class="dice-result">Roll the dice</div>
                                </div>
                                <button id="rollBtn" class="btn-roll" onclick="rollDice()" style="display: none;">üé≤ ROLL DICE</button>
                                <button id="endTurnBtn" class="btn-end-turn" onclick="endTurn()" style="display: none;">End Turn</button>
                            </div>
                        </div>
                    </div>

                    <!-- Right Panel - Chat & Events -->
                    <div class="right-panel">
                        <div class="panel-section trade-section" id="tradePanel" style="display: none;">
                            <h3>üí∞ Trade</h3>
                            <div class="trade-content">
                                <select id="tradeWithPlayer" class="input-field">
                                    <option>Select player...</option>
                                </select>
                                <div style="font-size: 0.9em; color: rgba(255,255,255,0.7); margin-top: 10px;">
                                    Coming soon: Trade properties and money
                                </div>
                            </div>
                        </div>

                        <div class="panel-section chat-section">
                            <h3>üí¨ Chat</h3>
                            <div id="chatMessages" class="chat-messages"></div>
                            <div class="chat-input">
                                <input type="text" id="chatInput" placeholder="Type message..." onkeypress="handleChatKeypress(event)">
                                <button onclick="sendMessage()" class="btn-send">Send</button>
                            </div>
                        </div>

                        <div class="panel-section events-section">
                            <h3>üìú Events</h3>
                            <div id="eventLog" class="event-log"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Property Popup -->
    <div id="propertyPopup" class="property-popup" style="display: none;">
        <div class="popup-content">
            <h2 id="propName"></h2>
            <div id="propDetails" class="property-details"></div>
            <div class="popup-actions">
                <button id="buyBtn" class="btn-buy" onclick="buyProperty()" style="display: none;">Buy Property</button>
                <button onclick="closePopup()" class="btn-close">Close</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="game.js"></script>
</body>
</html>
